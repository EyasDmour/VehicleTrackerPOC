<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"] - Vehicle Tracker</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="~/favicon.svg">
    
    <!-- Fonts (Local with CDN Fallback) -->
    @inject Microsoft.AspNetCore.Hosting.IWebHostEnvironment WebHostEnvironment
    @{
        var arimoExists = System.IO.File.Exists(System.IO.Path.Combine(WebHostEnvironment.WebRootPath, "fonts/arimo-regular.ttf"));
        var materialExists = System.IO.File.Exists(System.IO.Path.Combine(WebHostEnvironment.WebRootPath, "fonts/material-symbols-outlined.woff2"));
    }

    @if (arimoExists)
    {
        <link href="~/css/arimo.css" rel="stylesheet">
    }
    else
    {
        <link href="https://fonts.googleapis.com/css2?family=Arimo:wght@400;500;600;700&display=swap" rel="stylesheet">
    }
    
    @if (materialExists)
    {
        <link rel="stylesheet" href="~/css/material-symbols.css">
    }
    else
    {
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap">
    }
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
    
    <!-- App CSS (after Bootstrap to override) -->
    <link rel="stylesheet" href="~/css/app.css">
    <link rel="stylesheet" href="~/css/app-bootstrap.css">
</head>
<body>
    <div id="app" class="app">
        @RenderBody()
    </div>
    
    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <!-- SignalR Client -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/8.0.0/signalr.min.js"></script>
    
    <!-- App JS -->
    <script src="~/js/api.js"></script>
    <script src="~/js/state.js"></script>
    <script src="~/js/map.js"></script>
    <script src="~/js/sidebar.js"></script>
    <script src="~/js/historyPlayback.js"></script>
    <script src="~/js/app.js"></script>
    <script src="~/js/realtime.js"></script>
    
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
